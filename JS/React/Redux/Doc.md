## Documentざっとまとめ

[公式ドキュメント](https://redux.js.org/introduction/getting-started)サラ読みだと、ものすごい勢いで内容が抜けそうなので、ふんわり日本語訳しながらかみ砕いて読んでいく。

## Introduction

Reduxは一貫した形で動作し、client,server,nativeのような異なった環境でも実行でき、テストも簡単にできるアプリケーションを作ることを手助けする。
Reduxは素晴らしい開発体験を提供してくれる。

ReduxはReactと一緒に使うことができる。ほかのライブラリでも使える。2kbほどの依存性というほど、ちっこいけど、大きなエコシステムを持っている。

### Instllation

ここは、ずべこべ言わず、公式がおすすめしてくれている方法で、tool_kit等をinstallしたり、create-appしましょう

### Basic Example

アプリケーションのglobalなstate全体は、1つのストア内のオブジェクトツリーに格納される。そのstateを変更する、ただ一つの方法はactionを作成すること。あるオブジェクトに何が
起こるかを記載し、それをstoreに命令する(dispatchってどう訳すのが正解なんやろ)。
アクションに応じてstateを更新する方法を指定するには、純粋なreducer関数をかく。このreducer関数っていうのは、古いstateを元に新しいstateを算出する関数。

stateを直接書き換えるのではなく、actionと呼ばれるplainなオブジェクトで、state変異の方法を指定してあげる。
そんで、reducerと呼ばれる、アプリケーションのstate全体をどのように書き換えるか決めるための、特殊な関数を書く。

典型的なReduxアプリの場合、1つのroot_reducer関数をもつstoreが一つだけある。アプリが大きくなるにつれて、ルートreducerを小さなreducerに分割し、
stateツリーの異なる部分に独立した形で動作させるようになる。
これはまさに、Reactアプリはただ一つのルートcomponentしかないが、その中で小さなcomponentがたくさんあるような感じに似ている。

このアーキテクチャは、小さなアプリでは大変だと感じるかもしれないが、この美しさ(素晴らしさ)は、大きく複雑なアプリケーションに対応するための拡張性である。
また、すべての状態変化に対してそれがどのように起こったのかを追跡できるため、とっても強力な開発ツールとなりうる。→ユーザセッションを保存してリプレイするだけでOK

### Redux Toolkit

ReduxToolkitを使えば、Reduxの処理の記述やstoreの設定をシンプルにかける。そのおかげで、同じReduxの動作であってもロジックを短くかけたり、読みやすい形で書くことができる。

## Why Redux Toolkit is How to Use Redux Today

Redux Toolkit(RTK)は公式もおすすめするReduxのロジックを書くための手段。`@reduxjs/toolkit`パッケージはcoreの`redux`パッケージをwrapしており、 Reduxアプリケーションを
作る際に必須と思われるAPIメソッドや一般的な依存関係を含んでいる。
RTKはシンプルで、多くのタスクをさばけて、凡ミスをしにくいようなベストプラクティスを提供してくれて、また、Reduxアプリケーションを簡単につくることができる。

RTKはstoreの設定やreducer関数の作成、イミュータブルな状態更新のロジック、stateの切り分けなどの多くのユースケースをシンプルにするユーティリティを兼ね備えている。

### How Redux Toolkit Is Differrent Than the Redux Core

Reduxって何?

Reduxとはまさに、

- グローバルstateを含む、一つのstore
- アプリに何か変化があった時、storeに対してプレーンオブジェクトのアクションをdispatchする
- これらのアクションを検知して、イミュータブルなstateの更新を返す、純粋なreducer関数

必須ではないが

- アクションオブジェクトを生成するアクションクリエイター
- 副次効果を可能にするミドルウェア
- 副次効果に伴う同期・非同期処理を含むThunk関数
- IDで項目を検索できるようにするための正規化されたstate
- 派生データを最適化するためのReselectライブラリでselector関数をメモ化
- アクションのhistoryやstateの変化をみるためのDevToolsの拡張
- アクションやstateおよびその他の機能のためのTypeScriptの型

加えて、Reduxは普通React-Reduxライブラリを使用する。それによってReactコンポーネントはReduxストアと対話できる。

### Reduxのcoreは何してるんだ?

Reduxのcoreはとっても小さく、意図的に関心が分離されたライブラリで、いくつかの小さなAPIのタネを提供している。

- `createStore`で実際にReduxのstoreをつくる。
- `combineReducers`で複数の細かなreducerを大きなreducerに統合する
- `applyMiddleware`で複数のミドルウェアをstoreエンハンサーに統合する
- `compose`で複数のstoreエンハンサーを一つのstoreエンハンサーに統合する

これら以外のRedux関連のロジックはあなた自身で書く必要がある。

これは、Reduxはた～くさんの異なる方法で使用することができるという良い点がある反面、コードを簡単に書くための便利なヘルパーはないという意味でもある。

例として、reducer関数はただの関数で、Redux Toolkitができる前は、switch文を書いたり、手動更新でstateの更新を記述しなければならなかった。また、
actionクリエイターやactionタイプも手書きしないといけなかった。

このReduxのcoreに依存しない書き方は、多くの記述量を要し、非破壊的な(イミュータブルな)更新はたくさんのspread構文や配列の処理を駆使しなければならず、
簡単にミスが起こりやすく、誤って破壊的な変更を処理の中で加えてしまうこともあり得た。
また、厳密には必須ではないが、一つの機能のコードを`actions/todos.js`, `constants/todo.js`などの複数のファイルに分けることも一般的であった。

加えて、storeのセットアップにおいては、thunkなどのよく使われるようなミドルウェアを追加したり、ReduxDevToolsの拡張機能を有効にしたり、Reduxのアプリ開発で
ほとんどの場合で使われるようなツールであっても使えるようにするための一連の流れが必要なのが、普通だった。

### What Does Redux Toolkit Do?

もともとのReduxのドキュメントで書かれていた方法での実装は記述が冗長になってしまったり、必ずしも必要でないものもあり、
その定型文のように書く、冗長な部分はミスを招きやすかった。

これらの手書きの定型文のような部分を取り除いて、よくあるミスを減らし、Reduxのタスクをシンプルに記述できるようにするために、RTKは作られた。

RTKはすべてのReduxアプリにおいて、もっともよく使用される事を簡略化する、二つの主要なAPIから始まる

- `configureStore`では一回の関数を呼ぶだけで、storeのsetupを完了してくれる。これまで手動でやっていた、reducerの統合、thunkなどのミドルウェアの追加、DevToolsの有効化など。`createStore`より簡単にできる。
- `createSlice`を使えば、Immerライブラリを使用して非破壊的な更新処理を記述する際に、JSでいうところの、破壊的な変更を加えてしまう書き方でもreducerを書くことができる。スプレッド構文などを使用しなくてもよい(?)






